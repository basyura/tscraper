<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link rel="shortcut icon" href="favicon.ico" >
  <title>ROneUsers</title>
  <LINK REL="stylesheet" TYPE="text/css" HREF="css/index.css">
</head>
<body style="background-image:url(img/bg.gif)">
<img src="img/logo.png">
<table>
  <tr>
    <td valign="top">
      <table class="num_list">
      <tr><th>No.</th><th>location</th><th>num</th></tr>
      <%
      User.cached_ranking.each_with_index{|v,no|
      %>
        <tr>
          <td class="no" align="center"><%= no + 1%></td>
          <td class="location"><%= h v[1] %></td>
          <td class="count" align="center">
            <a href="location/<%= v[0] %>"><%= v[2] %></a>
          </td>
        </tr>
      <%
      }
      %>
      </table>
    </td>
    <td>
    &nbsp;
    </td>
    <td valign="top">
      <div>
      crawl <%= User.cached_count %> user.
      </div>
      <div>
      半径 1 クリックの範囲を収集した地域別 Twitter ユーザ数<br>
        <ul>
          <li>あーるわんゆーざーず</li>
          <li>タイムゾーンが日本のユーザがフォローしているユーザを地域別に丸めて(新宿区→東京 etc)集計</li>
          <li>一時間に一回ぐらい統計データを更新</li>
        </ul>
      </div>
      <div>
        <table style="background-color:#44b3e7;color:#ffffff;width:100%;table-layout:fixed;">
          <tr><th>new users</th></tr>
        </table>
                                                      
        <% NUser.users(Time.now.strftime("%Y%m%d")).each_with_index{|u,i| %>
          <table style="border:1px dashed #3ea4d4;background-color:<%= i % 2 == 0 ? '#ffffff' : '#f8f8f8' %>;
                                                      width:100%;table-layout:fixed;">
            <tr>
              <td valign="top" width="60;">
                <a href="http://twitter.com/<%= u[:screen_name] %>">
                  <img src="<%= u[:profile_image_url] %>" 
                          style="widht:50;height:50;border-style:none;">
                </a><br>
              </td>
              <td valign="top">
                <a href="http://twitter.com/<%= u[:screen_name] %>">
                  <b><%= h u[:screen_name] %></b>
                </a>
                <br>
                <%= h u[:location] %><br>
                <a href="<%= u[:url] %>"><%= u[:url] %></a><br>
                <%= h u[:description] %>
                <br>
                following : <%= u[:followers_count] %>
                &nbsp;&nbsp;
                followers : <%= u[:friends_count] %>
                &nbsp;&nbsp;
                tweets : <%= u[:statuses_count] %>
              </td>
            </tr>
          </table>
        <% } %>
      </div>
      <br>
      <div align="right">
        <a href="http://basyura.org/">basyura.org</a><br>
        <a href="http://d.hatena.ne.jp/basyura">blog</a><br>
        <a href="http://twitter.com/basyura">twitter</a>
      </div>
      <br>
      <div align="right">
      Powered by ruby <%= VERSION %><br>
      sinatra <%= Sinatra::VERSION%><br>
      sequel <%= Sequel::VERSION%><br>
      rack <%= Rack::version %><br>
      sqlite3<br>
      with cgi
      </div>
    </td>
  </tr>
</table>
</body>
</html>
